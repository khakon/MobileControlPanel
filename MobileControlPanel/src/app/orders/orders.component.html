<div class="col-md-12">
  <section class="content-header">
    <h1>
      Заказы
      <small>Панель управления</small>
    </h1>
    <ol class="breadcrumb">
      <li><a [routerLink]="['']"><i class="fa fa-dashboard"></i> Главная</a></li>
      <li class="active">Заказы</li>
    </ol>
  </section>
  <section class="col-lg-12 connectedSortable ui-sortable">
    <div class="box box-info">
      <div class="box-header with-border">
        <div class="box-tools pull-right">
          <!--<button type="button" class="btn btn-box-tool" data-widget="collapse">
            <i class="fa fa-minus"></i>
          </button>
          <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>-->
        </div>
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        <div class="table-responsive">
          <dx-data-grid id="gridContainer"
                        [dataSource]="orders"
                        (onRowPrepared)="onRowPrepared($event)"
                        (onToolbarPreparing)="onToolbarPreparing($event)">
            <dxo-filter-row [visible]="true"
                            [applyFilter]="true"></dxo-filter-row>
            <dxo-header-filter [visible]="true"></dxo-header-filter>
            <dxo-search-panel [visible]="true"
                              [width]="240"
                              placeholder="Search..."></dxo-search-panel>
            <dxi-column caption="Дата" dataField="date" dataType="date" width="100" format='shortDate'></dxi-column>
            <dxi-column caption="Агент" dataField="agent" width="150"></dxi-column>
            <dxi-column caption="Покупатель" dataField="customer"></dxi-column>
            <dxi-column caption="Номер" dataField="number" width="70"></dxi-column>
            <dxi-column caption="Товар" dataField="product"></dxi-column>
            <dxi-column caption="Кол" dataField="quantity" width="70"></dxi-column>
            <dxi-column caption="Цена" dataField="price" width="70"></dxi-column>
            <dxi-column caption="Сумма" dataField="sum" width="90"></dxi-column>
            <dxi-column caption="Время" dataField="timeStamp" width="150"></dxi-column>
            <dxi-column [width]="55" cellTemplate="deleteTemplate"></dxi-column>
            <dxo-summary>
              <dxi-total-item column="sum" summaryType="sum" [customizeText]="customizeSum"></dxi-total-item>
            </dxo-summary>
            <div *dxTemplate="let d of 'deleteTemplate'">
              <dx-button icon="remove"
                         type="danger"
                         (onClick)="deleteActionOptions.onClick(d.data)">
              </dx-button>
            </div>
          </dx-data-grid>
        </div>
        <dx-popup class="popup"
                  [width]="300"
                  [height]="400"
                  [showTitle]="true"
                  title="Подтвердите удаление"
                  [dragEnabled]="false"
                  [closeOnOutsideClick]="true"
                  [(visible)]="popupVisibleDelete">
          <div *dxTemplate="let data of 'content'">
            <p>
              Агент:
              <span>{{order.agent}}</span>
            </p>
            <p>
              Покупатель:
              <span>{{order.customer}}</span>
            </p>
            <p>
              Товар:
              <span>{{order.product}}</span>
            </p>
            <div class="dx-fieldset">
              <div class="dx-field">
                <div class="dx-field-value">
                  <dx-button [text]="cancelDeleteButtonOptions.text" [type]="cancelDeleteButtonOptions.type" (onClick)="cancelDeleteButtonOptions.onClick()"></dx-button>
                </div>
                <div class="dx-field-value">
                  <dx-button [text]="deleteButtonOptions.text" [type]="deleteButtonOptions.type" (onClick)="deleteButtonOptions.onClick()"></dx-button>
                </div>
              </div>
            </div>
          </div>
        </dx-popup>
        <!-- /.table-responsive -->
      </div>
      <!-- /.box-body -->
      <div class="box-footer clearfix">
        <!--<a href="javascript:void(0)" class="btn btn-sm btn-info btn-flat pull-left">Place New Order</a>
        <a href="javascript:void(0)" class="btn btn-sm btn-default btn-flat pull-right">View All Orders</a>-->
      </div>
      <!-- /.box-footer -->
    </div>
  </section>
</div>

